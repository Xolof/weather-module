<?php

namespace Xolof\WeatherModule;

use Anax\DI\DIFactoryConfig;
use PHPUnit\Framework\TestCase;

/**
 * Testclass.
 */
class WeatherFormatterTest extends TestCase
{
    /**
     * Prepare before each test.
     */
    protected function setUp()
    {
        global $di;

        // Setup di
        $di = new DIFactoryConfig();
        $di->loadServices(ANAX_INSTALL_PATH . "/config/di");
        $di->loadServices(ANAX_INSTALL_PATH . "/test/config/di");

        // Use a different cache dir for unit test
        $di->get("cache")->setPath(ANAX_INSTALL_PATH . "/test/cache");

        $this->di = $di;
    }

    /**
     * Test formatHistory
     */
    public function testFormatHistory()
    {
        $data = <<<EOD
        [{"lat":56.04,"lon":13.18,"timezone":"Europe\/Stockholm","timezone_offset":3600,"current":{"dt":1606089600,"sunrise":1606114843,"sunset":1606142832,"temp":7.06,"feels_like":0.36,"pressure":1014,"humidity":81,"dew_point":4.03,"uvi":0.33,"clouds":89,"visibility":10000,"wind_speed":7.7,"wind_deg":260,"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04n"}]},"hourly":[{"dt":1606089600,"temp":7.06,"feels_like":0.36,"pressure":1014,"humidity":81,"dew_point":4.03,"clouds":89,"visibility":10000,"wind_speed":7.7,"wind_deg":260,"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04n"}]},{"dt":1606093200,"temp":6.9,"feels_like":0.87,"pressure":1014,"humidity":81,"dew_point":3.87,"clouds":99,"visibility":10000,"wind_speed":6.7,"wind_deg":250,"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10n"}],"rain":{"1h":0.15}},{"dt":1606096800,"temp":6.87,"feels_like":1.92,"pressure":1014,"humidity":93,"dew_point":5.82,"clouds":95,"visibility":10000,"wind_speed":5.7,"wind_deg":240,"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10n"}],"rain":{"1h":0.15}},{"dt":1606100400,"temp":6.97,"feels_like":2.81,"pressure":1014,"humidity":93,"dew_point":5.92,"clouds":93,"visibility":10000,"wind_speed":4.6,"wind_deg":260,"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10n"}],"rain":{"1h":0.23}},{"dt":1606104000,"temp":6.61,"feels_like":1.61,"pressure":1013,"humidity":93,"dew_point":5.56,"clouds":87,"visibility":10000,"wind_speed":5.7,"wind_deg":250,"weather":[{"id":300,"main":"Drizzle","description":"light intensity drizzle","icon":"09n"}],"rain":{"1h":0.31}},{"dt":1606107600,"temp":6.21,"feels_like":0.94,"pressure":1013,"humidity":87,"dew_point":4.21,"clouds":89,"visibility":10000,"wind_speed":5.7,"wind_deg":250,"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10n"}],"rain":{"1h":0.42}},{"dt":1606111200,"temp":5.81,"feels_like":0.3,"pressure":1013,"humidity":93,"dew_point":4.77,"clouds":91,"visibility":10000,"wind_speed":6.2,"wind_deg":240,"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10n"}],"rain":{"1h":0.35}},{"dt":1606114800,"temp":6.24,"feels_like":0.28,"pressure":1014,"humidity":87,"dew_point":4.24,"clouds":100,"visibility":10000,"wind_speed":6.7,"wind_deg":250,"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04n"}]},{"dt":1606118400,"temp":6.55,"feels_like":-0.05,"pressure":1014,"humidity":87,"dew_point":4.54,"clouds":75,"visibility":10000,"wind_speed":7.7,"wind_deg":270,"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04d"}]},{"dt":1606122000,"temp":6.97,"feels_like":-0.25,"pressure":1015,"humidity":87,"dew_point":4.96,"clouds":75,"visibility":10000,"wind_speed":8.7,"wind_deg":270,"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04d"}]},{"dt":1606125600,"temp":7.83,"feels_like":0.15,"pressure":1015,"humidity":81,"dew_point":4.78,"clouds":75,"visibility":10000,"wind_speed":9.3,"wind_deg":270,"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04d"}]},{"dt":1606129200,"temp":8.4,"feels_like":0.48,"pressure":1016,"humidity":81,"dew_point":5.33,"clouds":75,"visibility":10000,"wind_speed":9.8,"wind_deg":270,"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04d"}]},{"dt":1606132800,"temp":8.7,"feels_like":0.84,"pressure":1016,"humidity":81,"dew_point":5.63,"clouds":75,"visibility":10000,"wind_speed":9.8,"wind_deg":270,"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04d"}]},{"dt":1606136400,"temp":8.48,"feels_like":0.58,"pressure":1017,"humidity":81,"dew_point":5.41,"clouds":75,"visibility":10000,"wind_speed":9.8,"wind_deg":270,"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04d"}]},{"dt":1606140000,"temp":8.16,"feels_like":0.96,"pressure":1017,"humidity":81,"dew_point":5.1,"clouds":75,"visibility":10000,"wind_speed":8.7,"wind_deg":280,"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04d"}]},{"dt":1606143600,"temp":7.83,"feels_like":-0.41,"pressure":1018,"humidity":75,"dew_point":3.68,"clouds":75,"visibility":10000,"wind_speed":9.8,"wind_deg":280,"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04n"}]},{"dt":1606147200,"temp":7.43,"feels_like":0.44,"pressure":1019,"humidity":81,"dew_point":4.39,"clouds":78,"visibility":10000,"wind_speed":8.2,"wind_deg":270,"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04n"}]},{"dt":1606150800,"temp":7.3,"feels_like":0.99,"pressure":1019,"humidity":81,"dew_point":4.26,"clouds":73,"visibility":10000,"wind_speed":7.2,"wind_deg":280,"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04n"}]},{"dt":1606154400,"temp":7.03,"feels_like":0.67,"pressure":1019,"humidity":81,"dew_point":4,"clouds":70,"visibility":10000,"wind_speed":7.2,"wind_deg":270,"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04n"}]},{"dt":1606158000,"temp":7.03,"feels_like":2.69,"pressure":1020,"humidity":87,"dew_point":5.02,"clouds":100,"visibility":10000,"wind_speed":4.6,"wind_deg":270,"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04n"}]},{"dt":1606161600,"temp":6.9,"feels_like":2.34,"pressure":1020,"humidity":81,"dew_point":3.87,"clouds":70,"visibility":10000,"wind_speed":4.6,"wind_deg":240,"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04n"}]},{"dt":1606165200,"temp":6.7,"feels_like":1.94,"pressure":1020,"humidity":87,"dew_point":4.69,"clouds":80,"visibility":10000,"wind_speed":5.1,"wind_deg":240,"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04n"}]},{"dt":1606168800,"temp":6.48,"feels_like":1.87,"pressure":1020,"humidity":93,"dew_point":5.43,"clouds":85,"visibility":10000,"wind_speed":5.1,"wind_deg":240,"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04n"}]},{"dt":1606172400,"temp":6.56,"feels_like":1.55,"pressure":1020,"humidity":93,"dew_point":5.51,"clouds":87,"visibility":10000,"wind_speed":5.7,"wind_deg":230,"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04n"}]}]},{"lat":56.04,"lon":13.18,"timezone":"Europe\/Stockholm","timezone_offset":3600,"current":{"dt":1606003200,"sunrise":1606028327,"sunset":1606056514,"temp":8.57,"feels_like":3.78,"pressure":1013,"humidity":87,"dew_point":6.53,"uvi":0.36,"clouds":92,"visibility":10000,"wind_speed":5.7,"wind_deg":260,"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04n"}]},"hourly":[{"dt":1606003200,"temp":8.57,"feels_like":3.78,"pressure":1013,"humidity":87,"dew_point":6.53,"clouds":92,"visibility":10000,"wind_speed":5.7,"wind_deg":260,"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04n"}]},{"dt":1606006800,"temp":8.34,"feels_like":3.92,"pressure":1012,"humidity":87,"dew_point":6.31,"clouds":72,"visibility":10000,"wind_speed":5.1,"wind_deg":240,"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04n"}]},{"dt":1606010400,"temp":7.95,"feels_like":3.24,"pressure":1012,"humidity":93,"dew_point":6.89,"clouds":59,"visibility":10000,"wind_speed":5.7,"wind_deg":240,"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04n"}]},{"dt":1606014000,"temp":7.96,"feels_like":3.25,"pressure":1012,"humidity":93,"dew_point":6.9,"clouds":49,"visibility":10000,"wind_speed":5.7,"wind_deg":240,"weather":[{"id":802,"main":"Clouds","description":"scattered clouds","icon":"03n"}]},{"dt":1606017600,"temp":7.93,"feels_like":2.3,"pressure":1012,"humidity":87,"dew_point":5.9,"clouds":62,"visibility":10000,"wind_speed":6.7,"wind_deg":240,"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10n"}],"rain":{"1h":0.22}},{"dt":1606021200,"temp":7.75,"feels_like":2.64,"pressure":1011,"humidity":93,"dew_point":6.69,"clouds":68,"visibility":10000,"wind_speed":6.2,"wind_deg":230,"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10n"}],"rain":{"1h":0.3}},{"dt":1606024800,"temp":7.66,"feels_like":2.53,"pressure":1011,"humidity":93,"dew_point":6.6,"clouds":73,"visibility":10000,"wind_speed":6.2,"wind_deg":240,"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10n"}],"rain":{"1h":0.64}},{"dt":1606028400,"temp":7.4,"feels_like":1.66,"pressure":1011,"humidity":87,"dew_point":5.38,"clouds":55,"visibility":10000,"wind_speed":6.7,"wind_deg":250,"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10d"}],"rain":{"1h":0.33}},{"dt":1606032000,"temp":7.59,"feels_like":1.89,"pressure":1011,"humidity":87,"dew_point":5.57,"clouds":49,"visibility":10000,"wind_speed":6.7,"wind_deg":250,"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10d"}],"rain":{"1h":0.3}},{"dt":1606035600,"temp":8.14,"feels_like":2.55,"pressure":1011,"humidity":87,"dew_point":6.11,"clouds":62,"visibility":10000,"wind_speed":6.7,"wind_deg":240,"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10d"}],"rain":{"1h":0.58}},{"dt":1606039200,"temp":8.76,"feels_like":1.68,"pressure":1011,"humidity":81,"dew_point":5.68,"clouds":70,"visibility":10000,"wind_speed":8.7,"wind_deg":260,"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10d"}],"rain":{"1h":0.12}},{"dt":1606042800,"temp":8.93,"feels_like":2.05,"pressure":1012,"humidity":76,"dew_point":4.93,"clouds":56,"visibility":10000,"wind_speed":8.2,"wind_deg":260,"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04d"}]},{"dt":1606046400,"temp":9.01,"feels_like":0.8,"pressure":1012,"humidity":70,"dew_point":3.84,"clouds":48,"visibility":10000,"wind_speed":9.8,"wind_deg":270,"weather":[{"id":802,"main":"Clouds","description":"scattered clouds","icon":"03d"}]},{"dt":1606050000,"temp":8.86,"feels_like":1.62,"pressure":1012,"humidity":76,"dew_point":4.87,"clouds":3,"visibility":10000,"wind_speed":8.7,"wind_deg":270,"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10d"}],"rain":{"1h":0.5}},{"dt":1606053600,"temp":8.8,"feels_like":1.32,"pressure":1012,"humidity":70,"dew_point":3.64,"clouds":18,"visibility":10000,"wind_speed":8.7,"wind_deg":260,"weather":[{"id":801,"main":"Clouds","description":"few clouds","icon":"02d"}]},{"dt":1606057200,"temp":8.47,"feels_like":1.63,"pressure":1013,"humidity":70,"dew_point":3.32,"clouds":27,"visibility":10000,"wind_speed":7.7,"wind_deg":250,"weather":[{"id":802,"main":"Clouds","description":"scattered clouds","icon":"03n"}]},{"dt":1606060800,"temp":8.26,"feels_like":0.89,"pressure":1013,"humidity":66,"dew_point":2.29,"clouds":38,"visibility":10000,"wind_speed":8.2,"wind_deg":260,"weather":[{"id":802,"main":"Clouds","description":"scattered clouds","icon":"03n"}]},{"dt":1606064400,"temp":7.95,"feels_like":-0.09,"pressure":1013,"humidity":70,"dew_point":2.82,"clouds":50,"visibility":10000,"wind_speed":9.3,"wind_deg":260,"weather":[{"id":800,"main":"Clear","description":"clear sky","icon":"01n"}]},{"dt":1606068000,"temp":8,"feels_like":1.26,"pressure":1013,"humidity":75,"dew_point":3.85,"clouds":58,"visibility":10000,"wind_speed":7.7,"wind_deg":260,"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04n"}]},{"dt":1606071600,"temp":7.69,"feels_like":-0.57,"pressure":1013,"humidity":75,"dew_point":3.55,"clouds":72,"visibility":10000,"wind_speed":9.8,"wind_deg":260,"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04n"}]},{"dt":1606075200,"temp":7.31,"feels_like":-0.67,"pressure":1013,"humidity":75,"dew_point":3.18,"clouds":85,"visibility":10000,"wind_speed":9.3,"wind_deg":260,"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04n"}]},{"dt":1606078800,"temp":7.26,"feels_like":-1.23,"pressure":1013,"humidity":81,"dew_point":4.22,"clouds":86,"visibility":10000,"wind_speed":10.3,"wind_deg":260,"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04n"}]},{"dt":1606082400,"temp":7.41,"feels_like":0.42,"pressure":1014,"humidity":81,"dew_point":4.37,"clouds":90,"visibility":10000,"wind_speed":8.2,"wind_deg":260,"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04n"}]},{"dt":1606086000,"temp":7.35,"feels_like":0.7,"pressure":1014,"humidity":81,"dew_point":4.31,"clouds":90,"visibility":10000,"wind_speed":7.7,"wind_deg":260,"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04n"}]}]},{"lat":56.04,"lon":13.18,"timezone":"Europe\/Stockholm","timezone_offset":3600,"current":{"dt":1605916800,"sunrise":1605941810,"sunset":1605970198,"temp":4.21,"feels_like":-0.62,"pressure":1028,"humidity":75,"dew_point":0.18,"uvi":0.4,"clouds":80,"visibility":10000,"wind_speed":4.1,"wind_deg":220,"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04n"}]},"hourly":[{"dt":1605916800,"temp":4.21,"feels_like":-0.62,"pressure":1028,"humidity":75,"dew_point":0.18,"clouds":80,"visibility":10000,"wind_speed":4.1,"wind_deg":220,"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04n"}]},{"dt":1605920400,"temp":4.4,"feels_like":0.6,"pressure":1027,"humidity":86,"dew_point":2.27,"clouds":97,"visibility":10000,"wind_speed":3.1,"wind_deg":180,"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04n"}]},{"dt":1605924000,"temp":4.65,"feels_like":1.24,"pressure":1026,"humidity":86,"dew_point":2.51,"clouds":98,"visibility":10000,"wind_speed":2.6,"wind_deg":180,"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04n"}]},{"dt":1605927600,"temp":5.49,"feels_like":1.56,"pressure":1025,"humidity":87,"dew_point":3.5,"clouds":98,"visibility":10000,"wind_speed":3.6,"wind_deg":190,"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04n"}]},{"dt":1605931200,"temp":5.75,"feels_like":0.82,"pressure":1025,"humidity":87,"dew_point":3.76,"clouds":99,"visibility":10000,"wind_speed":5.1,"wind_deg":210,"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04n"}]},{"dt":1605934800,"temp":5.7,"feels_like":0.58,"pressure":1024,"humidity":81,"dew_point":2.7,"clouds":99,"visibility":10000,"wind_speed":5.1,"wind_deg":200,"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04n"}]},{"dt":1605938400,"temp":5.76,"feels_like":-1.01,"pressure":1023,"humidity":75,"dew_point":1.68,"clouds":99,"visibility":10000,"wind_speed":7.2,"wind_deg":200,"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10n"}],"rain":{"1h":0.22}},{"dt":1605942000,"temp":5.51,"feels_like":0.29,"pressure":1022,"humidity":93,"dew_point":4.47,"clouds":100,"visibility":5000,"wind_speed":5.7,"wind_deg":190,"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10d"}],"rain":{"1h":0.48}},{"dt":1605945600,"temp":5.37,"feels_like":-0.37,"pressure":1021,"humidity":100,"dew_point":5.37,"clouds":100,"visibility":6000,"wind_speed":6.7,"wind_deg":200,"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10d"}],"rain":{"1h":0.61}},{"dt":1605949200,"temp":5.31,"feels_like":-0.44,"pressure":1020,"humidity":100,"dew_point":5.31,"clouds":100,"visibility":2600,"wind_speed":6.7,"wind_deg":210,"wind_gust":13.4,"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10d"}],"rain":{"1h":0.25}},{"dt":1605952800,"temp":5.47,"feels_like":-1.3,"pressure":1020,"humidity":100,"dew_point":5.47,"clouds":100,"visibility":2500,"wind_speed":8.2,"wind_deg":210,"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10d"}],"rain":{"1h":0.76}},{"dt":1605956400,"temp":5.76,"feels_like":-1.3,"pressure":1018,"humidity":100,"dew_point":5.76,"clouds":100,"visibility":10000,"wind_speed":8.7,"wind_deg":210,"wind_gust":14.9,"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10d"}],"rain":{"1h":0.25}},{"dt":1605960000,"temp":6.07,"feels_like":0.13,"pressure":1017,"humidity":100,"dew_point":6.07,"clouds":100,"visibility":10000,"wind_speed":7.2,"wind_deg":220,"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04d"}]},{"dt":1605963600,"temp":6.25,"feels_like":0,"pressure":1017,"humidity":100,"dew_point":6.25,"clouds":100,"visibility":5000,"wind_speed":7.7,"wind_deg":210,"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10d"}],"rain":{"1h":0.51}},{"dt":1605967200,"temp":6.92,"feels_like":0.81,"pressure":1015,"humidity":100,"dew_point":6.92,"clouds":100,"visibility":6000,"wind_speed":7.7,"wind_deg":210,"weather":[{"id":701,"main":"Mist","description":"mist","icon":"50d"}]},{"dt":1605970800,"temp":6.91,"feels_like":-0.32,"pressure":1015,"humidity":100,"dew_point":6.91,"clouds":100,"visibility":3600,"wind_speed":9.3,"wind_deg":210,"weather":[{"id":301,"main":"Drizzle","description":"drizzle","icon":"09n"},{"id":500,"main":"Rain","description":"light rain","icon":"10n"}],"rain":{"1h":0.25}},{"dt":1605974400,"temp":7.39,"feels_like":0.27,"pressure":1014,"humidity":100,"dew_point":7.39,"clouds":100,"visibility":1800,"wind_speed":9.3,"wind_deg":220,"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10n"}],"rain":{"1h":0.51}},{"dt":1605978000,"temp":7.94,"feels_like":1.37,"pressure":1013,"humidity":100,"dew_point":7.94,"clouds":100,"visibility":2000,"wind_speed":8.7,"wind_deg":220,"wind_gust":14.4,"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10n"}],"rain":{"1h":0.25}},{"dt":1605981600,"temp":8.47,"feels_like":2.73,"pressure":1012,"humidity":100,"dew_point":8.47,"clouds":100,"visibility":1600,"wind_speed":7.7,"wind_deg":220,"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10n"}],"rain":{"1h":0.25}},{"dt":1605985200,"temp":8.63,"feels_like":3.28,"pressure":1013,"humidity":100,"dew_point":8.63,"clouds":100,"visibility":5000,"wind_speed":7.2,"wind_deg":240,"weather":[{"id":301,"main":"Drizzle","description":"drizzle","icon":"09n"},{"id":500,"main":"Rain","description":"light rain","icon":"10n"}],"rain":{"1h":0.76}},{"dt":1605988800,"temp":9.05,"feels_like":3.89,"pressure":1013,"humidity":93,"dew_point":7.98,"clouds":100,"visibility":10000,"wind_speed":6.7,"wind_deg":250,"weather":[{"id":501,"main":"Rain","description":"moderate rain","icon":"10n"}],"rain":{"1h":2.03}},{"dt":1605992400,"temp":9.13,"feels_like":3.99,"pressure":1013,"humidity":93,"dew_point":8.06,"clouds":100,"visibility":10000,"wind_speed":6.7,"wind_deg":250,"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10n"}],"rain":{"1h":0.27}},{"dt":1605996000,"temp":9.29,"feels_like":4.89,"pressure":1013,"humidity":93,"dew_point":8.22,"clouds":99,"visibility":10000,"wind_speed":5.7,"wind_deg":250,"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10n"}],"rain":{"1h":0.16}},{"dt":1605999600,"temp":9.12,"feels_like":3.52,"pressure":1013,"humidity":81,"dew_point":6.04,"clouds":97,"visibility":10000,"wind_speed":6.7,"wind_deg":260,"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04n"}]}]},{"lat":56.04,"lon":13.18,"timezone":"Europe\/Stockholm","timezone_offset":3600,"current":{"dt":1605830400,"sunrise":1605855292,"sunset":1605883886,"temp":3.47,"feels_like":-1.76,"pressure":1016,"humidity":77,"dew_point":-0.15,"uvi":0.37,"clouds":20,"visibility":10000,"wind_speed":4.6,"wind_deg":330,"weather":[{"id":801,"main":"Clouds","description":"few clouds","icon":"02n"}]},"hourly":[{"dt":1605830400,"temp":3.47,"feels_like":-1.76,"pressure":1016,"humidity":77,"dew_point":-0.15,"clouds":20,"visibility":10000,"wind_speed":4.6,"wind_deg":330,"weather":[{"id":801,"main":"Clouds","description":"few clouds","icon":"02n"}]},{"dt":1605834000,"temp":2.72,"feels_like":-1.74,"pressure":1017,"humidity":84,"dew_point":0.29,"clouds":0,"visibility":10000,"wind_speed":3.6,"wind_deg":280,"weather":[{"id":800,"main":"Clear","description":"clear sky","icon":"01n"}]},{"dt":1605837600,"temp":2.68,"feels_like":-1.04,"pressure":1019,"humidity":86,"dew_point":0.58,"clouds":0,"visibility":10000,"wind_speed":2.6,"wind_deg":300,"weather":[{"id":800,"main":"Clear","description":"clear sky","icon":"01n"}]},{"dt":1605841200,"temp":2.04,"feels_like":-1.75,"pressure":1020,"humidity":87,"dew_point":0.11,"clouds":0,"visibility":10000,"wind_speed":2.6,"wind_deg":280,"weather":[{"id":800,"main":"Clear","description":"clear sky","icon":"01n"}]},{"dt":1605844800,"temp":1.45,"feels_like":-1.33,"pressure":1020,"humidity":86,"dew_point":-0.56,"clouds":0,"visibility":10000,"wind_speed":1,"wind_deg":260,"weather":[{"id":800,"main":"Clear","description":"clear sky","icon":"01n"}]},{"dt":1605848400,"temp":1.36,"feels_like":-2.59,"pressure":1021,"humidity":100,"dew_point":1.36,"clouds":0,"visibility":10000,"wind_speed":3.1,"wind_deg":280,"weather":[{"id":800,"main":"Clear","description":"clear sky","icon":"01n"}]},{"dt":1605852000,"temp":2.52,"feels_like":-3.15,"pressure":1021,"humidity":64,"dew_point":-3.18,"clouds":0,"visibility":10000,"wind_speed":4.6,"wind_deg":250,"weather":[{"id":800,"main":"Clear","description":"clear sky","icon":"01n"}]},{"dt":1605855600,"temp":3.26,"feels_like":-2.17,"pressure":1022,"humidity":84,"dew_point":0.82,"clouds":0,"visibility":10000,"wind_speed":5.1,"wind_deg":250,"weather":[{"id":800,"main":"Clear","description":"clear sky","icon":"01d"}]},{"dt":1605859200,"temp":4.26,"feels_like":-0.61,"pressure":1023,"humidity":86,"dew_point":2.13,"clouds":40,"visibility":10000,"wind_speed":4.6,"wind_deg":240,"weather":[{"id":802,"main":"Clouds","description":"scattered clouds","icon":"03d"}]},{"dt":1605862800,"temp":5.29,"feels_like":0.77,"pressure":1024,"humidity":80,"dew_point":2.12,"clouds":75,"visibility":10000,"wind_speed":4.1,"wind_deg":270,"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04d"}]},{"dt":1605866400,"temp":6.19,"feels_like":1.51,"pressure":1024,"humidity":70,"dew_point":1.13,"clouds":20,"visibility":10000,"wind_speed":4.1,"wind_deg":270,"weather":[{"id":801,"main":"Clouds","description":"few clouds","icon":"02d"}]},{"dt":1605870000,"temp":6.83,"feels_like":1.38,"pressure":1025,"humidity":65,"dew_point":0.72,"clouds":20,"visibility":10000,"wind_speed":5.1,"wind_deg":270,"weather":[{"id":801,"main":"Clouds","description":"few clouds","icon":"02d"}]},{"dt":1605873600,"temp":7.04,"feels_like":0.54,"pressure":1025,"humidity":66,"dew_point":1.13,"clouds":20,"visibility":10000,"wind_speed":6.7,"wind_deg":290,"weather":[{"id":801,"main":"Clouds","description":"few clouds","icon":"02d"}]},{"dt":1605877200,"temp":6.95,"feels_like":1.52,"pressure":1025,"humidity":65,"dew_point":0.83,"clouds":20,"visibility":10000,"wind_speed":5.1,"wind_deg":270,"weather":[{"id":801,"main":"Clouds","description":"few clouds","icon":"02d"}]},{"dt":1605880800,"temp":5.97,"feels_like":0.68,"pressure":1026,"humidity":74,"dew_point":1.69,"clouds":20,"visibility":10000,"wind_speed":5.1,"wind_deg":270,"weather":[{"id":801,"main":"Clouds","description":"few clouds","icon":"02d"}]},{"dt":1605884400,"temp":5.19,"feels_like":-0.19,"pressure":1027,"humidity":75,"dew_point":1.13,"clouds":20,"visibility":10000,"wind_speed":5.1,"wind_deg":270,"weather":[{"id":801,"main":"Clouds","description":"few clouds","icon":"02n"}]},{"dt":1605888000,"temp":4.18,"feels_like":0.26,"pressure":1028,"humidity":83,"dew_point":1.56,"clouds":2,"visibility":10000,"wind_speed":3.1,"wind_deg":230,"weather":[{"id":800,"main":"Clear","description":"clear sky","icon":"01n"}]},{"dt":1605891600,"temp":3.3,"feels_like":-1.1,"pressure":1028,"humidity":83,"dew_point":0.69,"clouds":10,"visibility":10000,"wind_speed":3.6,"wind_deg":240,"weather":[{"id":800,"main":"Clear","description":"clear sky","icon":"01n"}]},{"dt":1605895200,"temp":3.59,"feels_like":-1.42,"pressure":1028,"humidity":85,"dew_point":1.31,"clouds":17,"visibility":10000,"wind_speed":4.6,"wind_deg":240,"weather":[{"id":801,"main":"Clouds","description":"few clouds","icon":"02n"}]},{"dt":1605898800,"temp":3.28,"feels_like":-1.12,"pressure":1028,"humidity":83,"dew_point":0.67,"clouds":59,"visibility":10000,"wind_speed":3.6,"wind_deg":240,"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04n"}]},{"dt":1605902400,"temp":3.17,"feels_like":0.14,"pressure":1028,"humidity":80,"dew_point":0.06,"clouds":74,"visibility":10000,"wind_speed":1.5,"wind_deg":260,"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04n"}]},{"dt":1605906000,"temp":2.79,"feels_like":0.21,"pressure":1028,"humidity":86,"dew_point":0.68,"clouds":71,"visibility":10000,"wind_speed":1,"wind_deg":0,"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04n"}]},{"dt":1605909600,"temp":3.46,"feels_like":-0.14,"pressure":1029,"humidity":86,"dew_point":1.34,"clouds":73,"visibility":10000,"wind_speed":2.6,"wind_deg":230,"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04n"}]},{"dt":1605913200,"temp":4.08,"feels_like":-0.12,"pressure":1028,"humidity":86,"dew_point":1.95,"clouds":78,"visibility":10000,"wind_speed":3.6,"wind_deg":230,"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04n"}]}]},{"lat":56.04,"lon":13.18,"timezone":"Europe\/Stockholm","timezone_offset":3600,"current":{"dt":1605744000,"sunrise":1605768772,"sunset":1605797576,"temp":10.63,"feels_like":4.56,"pressure":1005,"humidity":87,"dew_point":8.56,"uvi":0.39,"clouds":99,"visibility":10000,"wind_speed":8.2,"wind_deg":200,"wind_gust":13.9,"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04n"}]},"hourly":[{"dt":1605744000,"temp":10.63,"feels_like":4.56,"pressure":1005,"humidity":87,"dew_point":8.56,"clouds":99,"visibility":10000,"wind_speed":8.2,"wind_deg":200,"wind_gust":13.9,"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04n"}]},{"dt":1605747600,"temp":10.49,"feels_like":5.28,"pressure":1004,"humidity":100,"dew_point":10.49,"clouds":99,"visibility":5000,"wind_speed":7.7,"wind_deg":200,"weather":[{"id":501,"main":"Rain","description":"moderate rain","icon":"10n"}],"rain":{"1h":1.27}},{"dt":1605751200,"temp":10.95,"feels_like":6.22,"pressure":1002,"humidity":100,"dew_point":10.95,"clouds":99,"visibility":7000,"wind_speed":7.2,"wind_deg":210,"weather":[{"id":701,"main":"Mist","description":"mist","icon":"50n"}]},{"dt":1605754800,"temp":10.79,"feels_like":5.66,"pressure":1002,"humidity":100,"dew_point":10.79,"clouds":99,"visibility":2500,"wind_speed":7.7,"wind_deg":220,"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10n"}],"rain":{"1h":0.5}},{"dt":1605758400,"temp":9.81,"feels_like":2.66,"pressure":1002,"humidity":93,"dew_point":8.73,"clouds":99,"visibility":3200,"wind_speed":9.8,"wind_deg":250,"weather":[{"id":302,"main":"Drizzle","description":"heavy intensity drizzle","icon":"09n"}]},{"dt":1605762000,"temp":9.3,"feels_like":3.85,"pressure":1002,"humidity":93,"dew_point":8.23,"clouds":99,"visibility":10000,"wind_speed":7.2,"wind_deg":240,"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04n"}]},{"dt":1605765600,"temp":8.84,"feels_like":2.48,"pressure":1002,"humidity":81,"dew_point":5.76,"clouds":99,"visibility":10000,"wind_speed":7.7,"wind_deg":240,"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04n"}]},{"dt":1605769200,"temp":8.52,"feels_like":2.1,"pressure":1002,"humidity":81,"dew_point":5.45,"clouds":19,"visibility":10000,"wind_speed":7.7,"wind_deg":230,"weather":[{"id":801,"main":"Clouds","description":"few clouds","icon":"02d"}]},{"dt":1605772800,"temp":8.66,"feels_like":2.08,"pressure":1002,"humidity":76,"dew_point":4.67,"clouds":20,"visibility":10000,"wind_speed":7.7,"wind_deg":220,"weather":[{"id":801,"main":"Clouds","description":"few clouds","icon":"02d"}]},{"dt":1605776400,"temp":9.29,"feels_like":1.71,"pressure":1002,"humidity":76,"dew_point":5.28,"clouds":20,"visibility":10000,"wind_speed":9.3,"wind_deg":230,"weather":[{"id":801,"main":"Clouds","description":"few clouds","icon":"02d"}]},{"dt":1605780000,"temp":9.74,"feels_like":2.05,"pressure":1002,"humidity":71,"dew_point":4.74,"clouds":75,"visibility":10000,"wind_speed":9.3,"wind_deg":230,"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04d"}]},{"dt":1605783600,"temp":9.9,"feels_like":2.66,"pressure":1001,"humidity":71,"dew_point":4.89,"clouds":75,"visibility":10000,"wind_speed":8.7,"wind_deg":240,"wind_gust":14.9,"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04d"}]},{"dt":1605787200,"temp":8.38,"feels_like":1.05,"pressure":1001,"humidity":76,"dew_point":4.4,"clouds":75,"visibility":10000,"wind_speed":8.7,"wind_deg":240,"wind_gust":14.4,"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10d"}],"rain":{"1h":0.25}},{"dt":1605790800,"temp":7.31,"feels_like":-0.25,"pressure":1002,"humidity":75,"dew_point":3.18,"clouds":40,"visibility":10000,"wind_speed":8.7,"wind_deg":270,"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10d"}],"rain":{"1h":0.76}},{"dt":1605794400,"temp":6.8,"feels_like":-1.27,"pressure":1004,"humidity":75,"dew_point":2.68,"clouds":40,"visibility":10000,"wind_speed":9.3,"wind_deg":280,"weather":[{"id":802,"main":"Clouds","description":"scattered clouds","icon":"03d"}]},{"dt":1605798000,"temp":6.04,"feels_like":-3.91,"pressure":1006,"humidity":86,"dew_point":3.88,"clouds":81,"visibility":10000,"wind_speed":12.3,"wind_deg":310,"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10n"}],"rain":{"1h":0.5}},{"dt":1605801600,"temp":5.56,"feels_like":-3.28,"pressure":1008,"humidity":56,"dew_point":-2.22,"clouds":76,"visibility":10000,"wind_speed":9.3,"wind_deg":290,"weather":[{"id":600,"main":"Snow","description":"light snow","icon":"13n"}],"snow":{"1h":0.15}},{"dt":1605805200,"temp":5.33,"feels_like":-5.05,"pressure":1009,"humidity":52,"dew_point":-3.3,"clouds":76,"visibility":10000,"wind_speed":11.3,"wind_deg":290,"wind_gust":18,"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04n"}]},{"dt":1605808800,"temp":4.91,"feels_like":-3.69,"pressure":1011,"humidity":52,"dew_point":-3.64,"clouds":66,"visibility":10000,"wind_speed":8.7,"wind_deg":280,"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04n"}]},{"dt":1605812400,"temp":4.66,"feels_like":-4.17,"pressure":1012,"humidity":60,"dew_point":-2.15,"clouds":0,"visibility":10000,"wind_speed":9.3,"wind_deg":280,"weather":[{"id":800,"main":"Clear","description":"clear sky","icon":"01n"}]},{"dt":1605816000,"temp":4.43,"feels_like":-3.65,"pressure":1013,"humidity":60,"dew_point":-2.34,"clouds":0,"visibility":10000,"wind_speed":8.2,"wind_deg":280,"weather":[{"id":800,"main":"Clear","description":"clear sky","icon":"01n"}]},{"dt":1605819600,"temp":4.43,"feels_like":-4.28,"pressure":1013,"humidity":65,"dew_point":-1.38,"clouds":0,"visibility":10000,"wind_speed":9.3,"wind_deg":270,"weather":[{"id":800,"main":"Clear","description":"clear sky","icon":"01n"}]},{"dt":1605823200,"temp":4.45,"feels_like":-4.61,"pressure":1014,"humidity":65,"dew_point":-1.37,"clouds":1,"visibility":10000,"wind_speed":9.8,"wind_deg":270,"weather":[{"id":800,"main":"Clear","description":"clear sky","icon":"01n"}]},{"dt":1605826800,"temp":4.34,"feels_like":-4.43,"pressure":1015,"humidity":76,"dew_point":0.49,"clouds":3,"visibility":10000,"wind_speed":9.8,"wind_deg":260,"weather":[{"id":600,"main":"Snow","description":"light snow","icon":"13n"}],"snow":{"1h":0.32}}]},{"place_id":214420119,"licence":"Data \u00a9 OpenStreetMap contributors, ODbL 1.0. https:\/\/osm.org\/copyright","osm_type":"way","osm_id":633996513,"lat":"56.04074390218278","lon":"13.17982941553395","place_rank":26,"category":"highway","type":"tertiary","importance":0.09999999999999998,"addresstype":"road","name":"M 1823","display_name":"M 1823, Grindhus, Sval\u00f6vs kommun, Sk\u00e5ne l\u00e4n, G\u00f6taland, 268 76, Sverige","address":{"road":"M 1823","isolated_dwelling":"Grindhus","town":"Sval\u00f6vs kommun","county":"Sk\u00e5ne l\u00e4n","region":"G\u00f6taland","postcode":"268 76","country":"Sverige","country_code":"se"},"boundingbox":["56.0392779","56.041408","13.1713185","13.18638"]}]
EOD;

        $weatherFormatter = new WeatherFormatter();

        $res = $weatherFormatter->formatHistory(json_decode($data, true));

        $this->assertEquals("Sverige", $res["location"]["address"]["country"]);
    }

    /**
     * Test formatHistory
     */
    public function testFormatForecast()
    {
        $data = <<<EOD
        [{"cod":"200","message":0,"cnt":40,"list":[{"dt":1606230000,"main":{"temp":8.27,"feels_like":3.79,"temp_min":8.27,"temp_max":8.38,"pressure":1016,"sea_level":1016,"grnd_level":993,"humidity":96,"temp_kf":-0.11},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10n"}],"clouds":{"all":95},"wind":{"speed":5.63,"deg":247},"visibility":10000,"pop":0.34,"rain":{"3h":0.18},"sys":{"pod":"n"},"dt_txt":"2020-11-24 15:00:00"},{"dt":1606240800,"main":{"temp":8.11,"feels_like":3.87,"temp_min":8.09,"temp_max":8.11,"pressure":1017,"sea_level":1017,"grnd_level":994,"humidity":94,"temp_kf":0.02},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04n"}],"clouds":{"all":98},"wind":{"speed":5.13,"deg":242},"visibility":10000,"pop":0.03,"sys":{"pod":"n"},"dt_txt":"2020-11-24 18:00:00"},{"dt":1606251600,"main":{"temp":7.83,"feels_like":4.39,"temp_min":7.81,"temp_max":7.83,"pressure":1017,"sea_level":1017,"grnd_level":994,"humidity":95,"temp_kf":0.02},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04n"}],"clouds":{"all":99},"wind":{"speed":3.94,"deg":232},"visibility":10000,"pop":0,"sys":{"pod":"n"},"dt_txt":"2020-11-24 21:00:00"},{"dt":1606262400,"main":{"temp":7.38,"feels_like":4.05,"temp_min":7.37,"temp_max":7.38,"pressure":1017,"sea_level":1017,"grnd_level":995,"humidity":96,"temp_kf":0.01},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04n"}],"clouds":{"all":100},"wind":{"speed":3.69,"deg":230},"visibility":10000,"pop":0,"sys":{"pod":"n"},"dt_txt":"2020-11-25 00:00:00"},{"dt":1606273200,"main":{"temp":6.18,"feels_like":2.74,"temp_min":6.18,"temp_max":6.18,"pressure":1016,"sea_level":1016,"grnd_level":993,"humidity":98,"temp_kf":0},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04n"}],"clouds":{"all":100},"wind":{"speed":3.57,"deg":220},"visibility":10000,"pop":0,"sys":{"pod":"n"},"dt_txt":"2020-11-25 03:00:00"},{"dt":1606284000,"main":{"temp":5.69,"feels_like":2.33,"temp_min":5.69,"temp_max":5.69,"pressure":1016,"sea_level":1016,"grnd_level":994,"humidity":97,"temp_kf":0},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04n"}],"clouds":{"all":100},"wind":{"speed":3.26,"deg":214},"visibility":10000,"pop":0,"sys":{"pod":"n"},"dt_txt":"2020-11-25 06:00:00"},{"dt":1606294800,"main":{"temp":6.37,"feels_like":2.46,"temp_min":6.37,"temp_max":6.37,"pressure":1016,"sea_level":1016,"grnd_level":993,"humidity":93,"temp_kf":0},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04d"}],"clouds":{"all":99},"wind":{"speed":4.07,"deg":205},"visibility":10000,"pop":0,"sys":{"pod":"d"},"dt_txt":"2020-11-25 09:00:00"},{"dt":1606305600,"main":{"temp":7.27,"feels_like":3.21,"temp_min":7.27,"temp_max":7.27,"pressure":1016,"sea_level":1016,"grnd_level":993,"humidity":87,"temp_kf":0},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04d"}],"clouds":{"all":97},"wind":{"speed":4.27,"deg":206},"visibility":10000,"pop":0,"sys":{"pod":"d"},"dt_txt":"2020-11-25 12:00:00"},{"dt":1606316400,"main":{"temp":5.73,"feels_like":2.03,"temp_min":5.73,"temp_max":5.73,"pressure":1015,"sea_level":1015,"grnd_level":992,"humidity":92,"temp_kf":0},"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04n"}],"clouds":{"all":76},"wind":{"speed":3.55,"deg":202},"visibility":10000,"pop":0,"sys":{"pod":"n"},"dt_txt":"2020-11-25 15:00:00"},{"dt":1606327200,"main":{"temp":5.19,"feels_like":1.54,"temp_min":5.19,"temp_max":5.19,"pressure":1015,"sea_level":1015,"grnd_level":992,"humidity":92,"temp_kf":0},"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04n"}],"clouds":{"all":78},"wind":{"speed":3.33,"deg":203},"visibility":10000,"pop":0,"sys":{"pod":"n"},"dt_txt":"2020-11-25 18:00:00"},{"dt":1606338000,"main":{"temp":4.44,"feels_like":0.95,"temp_min":4.44,"temp_max":4.44,"pressure":1015,"sea_level":1015,"grnd_level":992,"humidity":95,"temp_kf":0},"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04n"}],"clouds":{"all":81},"wind":{"speed":3.03,"deg":217},"visibility":10000,"pop":0,"sys":{"pod":"n"},"dt_txt":"2020-11-25 21:00:00"},{"dt":1606348800,"main":{"temp":3.99,"feels_like":0.52,"temp_min":3.99,"temp_max":3.99,"pressure":1014,"sea_level":1014,"grnd_level":991,"humidity":97,"temp_kf":0},"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04n"}],"clouds":{"all":67},"wind":{"speed":2.95,"deg":232},"visibility":10000,"pop":0,"sys":{"pod":"n"},"dt_txt":"2020-11-26 00:00:00"},{"dt":1606359600,"main":{"temp":4.49,"feels_like":1,"temp_min":4.49,"temp_max":4.49,"pressure":1013,"sea_level":1013,"grnd_level":990,"humidity":98,"temp_kf":0},"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04n"}],"clouds":{"all":60},"wind":{"speed":3.15,"deg":233},"visibility":10000,"pop":0,"sys":{"pod":"n"},"dt_txt":"2020-11-26 03:00:00"},{"dt":1606370400,"main":{"temp":5.29,"feels_like":1.64,"temp_min":5.29,"temp_max":5.29,"pressure":1012,"sea_level":1012,"grnd_level":989,"humidity":97,"temp_kf":0},"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04n"}],"clouds":{"all":80},"wind":{"speed":3.56,"deg":210},"visibility":10000,"pop":0.03,"sys":{"pod":"n"},"dt_txt":"2020-11-26 06:00:00"},{"dt":1606381200,"main":{"temp":6.45,"feels_like":2.6,"temp_min":6.45,"temp_max":6.45,"pressure":1011,"sea_level":1011,"grnd_level":989,"humidity":100,"temp_kf":0},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10d"}],"clouds":{"all":100},"wind":{"speed":4.33,"deg":226},"visibility":10000,"pop":0.94,"rain":{"3h":1.22},"sys":{"pod":"d"},"dt_txt":"2020-11-26 09:00:00"},{"dt":1606392000,"main":{"temp":6.95,"feels_like":2.98,"temp_min":6.95,"temp_max":6.95,"pressure":1012,"sea_level":1012,"grnd_level":989,"humidity":92,"temp_kf":0},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10d"}],"clouds":{"all":100},"wind":{"speed":4.28,"deg":306},"visibility":10000,"pop":1,"rain":{"3h":0.63},"sys":{"pod":"d"},"dt_txt":"2020-11-26 12:00:00"},{"dt":1606402800,"main":{"temp":5.14,"feels_like":1.39,"temp_min":5.14,"temp_max":5.14,"pressure":1011,"sea_level":1011,"grnd_level":989,"humidity":93,"temp_kf":0},"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04n"}],"clouds":{"all":54},"wind":{"speed":3.5,"deg":279},"visibility":10000,"pop":0.02,"sys":{"pod":"n"},"dt_txt":"2020-11-26 15:00:00"},{"dt":1606413600,"main":{"temp":5.08,"feels_like":1.34,"temp_min":5.08,"temp_max":5.08,"pressure":1012,"sea_level":1012,"grnd_level":990,"humidity":95,"temp_kf":0},"weather":[{"id":802,"main":"Clouds","description":"scattered clouds","icon":"03n"}],"clouds":{"all":47},"wind":{"speed":3.55,"deg":281},"visibility":10000,"pop":0,"sys":{"pod":"n"},"dt_txt":"2020-11-26 18:00:00"},{"dt":1606424400,"main":{"temp":4.28,"feels_like":1.04,"temp_min":4.28,"temp_max":4.28,"pressure":1013,"sea_level":1013,"grnd_level":991,"humidity":97,"temp_kf":0},"weather":[{"id":800,"main":"Clear","description":"clear sky","icon":"01n"}],"clouds":{"all":4},"wind":{"speed":2.71,"deg":281},"visibility":10000,"pop":0,"sys":{"pod":"n"},"dt_txt":"2020-11-26 21:00:00"},{"dt":1606435200,"main":{"temp":2.89,"feels_like":-0.01,"temp_min":2.89,"temp_max":2.89,"pressure":1015,"sea_level":1015,"grnd_level":992,"humidity":99,"temp_kf":0},"weather":[{"id":800,"main":"Clear","description":"clear sky","icon":"01n"}],"clouds":{"all":4},"wind":{"speed":1.94,"deg":332},"visibility":10000,"pop":0,"sys":{"pod":"n"},"dt_txt":"2020-11-27 00:00:00"},{"dt":1606446000,"main":{"temp":2.27,"feels_like":-0.5,"temp_min":2.27,"temp_max":2.27,"pressure":1015,"sea_level":1015,"grnd_level":992,"humidity":99,"temp_kf":0},"weather":[{"id":801,"main":"Clouds","description":"few clouds","icon":"02n"}],"clouds":{"all":18},"wind":{"speed":1.6,"deg":4},"visibility":10000,"pop":0,"sys":{"pod":"n"},"dt_txt":"2020-11-27 03:00:00"},{"dt":1606456800,"main":{"temp":3.41,"feels_like":0.85,"temp_min":3.41,"temp_max":3.41,"pressure":1017,"sea_level":1017,"grnd_level":994,"humidity":96,"temp_kf":0},"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04n"}],"clouds":{"all":53},"wind":{"speed":1.47,"deg":54},"visibility":10000,"pop":0,"sys":{"pod":"n"},"dt_txt":"2020-11-27 06:00:00"},{"dt":1606467600,"main":{"temp":2.77,"feels_like":-0.14,"temp_min":2.77,"temp_max":2.77,"pressure":1019,"sea_level":1019,"grnd_level":996,"humidity":96,"temp_kf":0},"weather":[{"id":801,"main":"Clouds","description":"few clouds","icon":"02d"}],"clouds":{"all":23},"wind":{"speed":1.81,"deg":85},"visibility":10000,"pop":0,"sys":{"pod":"d"},"dt_txt":"2020-11-27 09:00:00"},{"dt":1606478400,"main":{"temp":4.89,"feels_like":2.66,"temp_min":4.89,"temp_max":4.89,"pressure":1020,"sea_level":1020,"grnd_level":997,"humidity":87,"temp_kf":0},"weather":[{"id":801,"main":"Clouds","description":"few clouds","icon":"02d"}],"clouds":{"all":12},"wind":{"speed":1.02,"deg":79},"visibility":10000,"pop":0,"sys":{"pod":"d"},"dt_txt":"2020-11-27 12:00:00"},{"dt":1606489200,"main":{"temp":2.44,"feels_like":-0.13,"temp_min":2.44,"temp_max":2.44,"pressure":1021,"sea_level":1021,"grnd_level":997,"humidity":95,"temp_kf":0},"weather":[{"id":800,"main":"Clear","description":"clear sky","icon":"01n"}],"clouds":{"all":0},"wind":{"speed":1.21,"deg":57},"visibility":10000,"pop":0,"sys":{"pod":"n"},"dt_txt":"2020-11-27 15:00:00"},{"dt":1606500000,"main":{"temp":1.29,"feels_like":-1.54,"temp_min":1.29,"temp_max":1.29,"pressure":1022,"sea_level":1022,"grnd_level":998,"humidity":94,"temp_kf":0},"weather":[{"id":800,"main":"Clear","description":"clear sky","icon":"01n"}],"clouds":{"all":0},"wind":{"speed":1.3,"deg":62},"visibility":10000,"pop":0,"sys":{"pod":"n"},"dt_txt":"2020-11-27 18:00:00"},{"dt":1606510800,"main":{"temp":0.54,"feels_like":-2.46,"temp_min":0.54,"temp_max":0.54,"pressure":1023,"sea_level":1023,"grnd_level":1000,"humidity":95,"temp_kf":0},"weather":[{"id":800,"main":"Clear","description":"clear sky","icon":"01n"}],"clouds":{"all":0},"wind":{"speed":1.41,"deg":68},"visibility":10000,"pop":0,"sys":{"pod":"n"},"dt_txt":"2020-11-27 21:00:00"},{"dt":1606521600,"main":{"temp":-0.35,"feels_like":-3.53,"temp_min":-0.35,"temp_max":-0.35,"pressure":1024,"sea_level":1024,"grnd_level":1000,"humidity":98,"temp_kf":0},"weather":[{"id":800,"main":"Clear","description":"clear sky","icon":"01n"}],"clouds":{"all":0},"wind":{"speed":1.58,"deg":69},"visibility":10000,"pop":0,"sys":{"pod":"n"},"dt_txt":"2020-11-28 00:00:00"},{"dt":1606532400,"main":{"temp":-0.71,"feels_like":-3.8,"temp_min":-0.71,"temp_max":-0.71,"pressure":1024,"sea_level":1024,"grnd_level":1001,"humidity":98,"temp_kf":0},"weather":[{"id":800,"main":"Clear","description":"clear sky","icon":"01n"}],"clouds":{"all":0},"wind":{"speed":1.38,"deg":82},"visibility":10000,"pop":0,"sys":{"pod":"n"},"dt_txt":"2020-11-28 03:00:00"},{"dt":1606543200,"main":{"temp":-0.77,"feels_like":-4.11,"temp_min":-0.77,"temp_max":-0.77,"pressure":1025,"sea_level":1025,"grnd_level":1002,"humidity":97,"temp_kf":0},"weather":[{"id":800,"main":"Clear","description":"clear sky","icon":"01n"}],"clouds":{"all":0},"wind":{"speed":1.69,"deg":76},"visibility":10000,"pop":0,"sys":{"pod":"n"},"dt_txt":"2020-11-28 06:00:00"},{"dt":1606554000,"main":{"temp":0.54,"feels_like":-2.9,"temp_min":0.54,"temp_max":0.54,"pressure":1026,"sea_level":1026,"grnd_level":1003,"humidity":93,"temp_kf":0},"weather":[{"id":800,"main":"Clear","description":"clear sky","icon":"01d"}],"clouds":{"all":0},"wind":{"speed":1.99,"deg":89},"visibility":10000,"pop":0,"sys":{"pod":"d"},"dt_txt":"2020-11-28 09:00:00"},{"dt":1606564800,"main":{"temp":2.6,"feels_like":-0.78,"temp_min":2.6,"temp_max":2.6,"pressure":1027,"sea_level":1027,"grnd_level":1003,"humidity":81,"temp_kf":0},"weather":[{"id":800,"main":"Clear","description":"clear sky","icon":"01d"}],"clouds":{"all":0},"wind":{"speed":1.92,"deg":94},"visibility":10000,"pop":0,"sys":{"pod":"d"},"dt_txt":"2020-11-28 12:00:00"},{"dt":1606575600,"main":{"temp":-0.16,"feels_like":-3.82,"temp_min":-0.16,"temp_max":-0.16,"pressure":1027,"sea_level":1027,"grnd_level":1003,"humidity":98,"temp_kf":0},"weather":[{"id":800,"main":"Clear","description":"clear sky","icon":"01n"}],"clouds":{"all":0},"wind":{"speed":2.3,"deg":81},"visibility":10000,"pop":0,"sys":{"pod":"n"},"dt_txt":"2020-11-28 15:00:00"},{"dt":1606586400,"main":{"temp":-0.45,"feels_like":-4,"temp_min":-0.45,"temp_max":-0.45,"pressure":1027,"sea_level":1027,"grnd_level":1004,"humidity":99,"temp_kf":0},"weather":[{"id":800,"main":"Clear","description":"clear sky","icon":"01n"}],"clouds":{"all":0},"wind":{"speed":2.12,"deg":95},"visibility":10000,"pop":0,"sys":{"pod":"n"},"dt_txt":"2020-11-28 18:00:00"},{"dt":1606597200,"main":{"temp":-0.53,"feels_like":-4.39,"temp_min":-0.53,"temp_max":-0.53,"pressure":1028,"sea_level":1028,"grnd_level":1004,"humidity":99,"temp_kf":0},"weather":[{"id":801,"main":"Clouds","description":"few clouds","icon":"02n"}],"clouds":{"all":12},"wind":{"speed":2.54,"deg":79},"visibility":10000,"pop":0,"sys":{"pod":"n"},"dt_txt":"2020-11-28 21:00:00"},{"dt":1606608000,"main":{"temp":0.74,"feels_like":-3.38,"temp_min":0.74,"temp_max":0.74,"pressure":1028,"sea_level":1028,"grnd_level":1004,"humidity":93,"temp_kf":0},"weather":[{"id":802,"main":"Clouds","description":"scattered clouds","icon":"03n"}],"clouds":{"all":39},"wind":{"speed":2.99,"deg":79},"visibility":10000,"pop":0,"sys":{"pod":"n"},"dt_txt":"2020-11-29 00:00:00"},{"dt":1606618800,"main":{"temp":1.6,"feels_like":-2.6,"temp_min":1.6,"temp_max":1.6,"pressure":1027,"sea_level":1027,"grnd_level":1004,"humidity":90,"temp_kf":0},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04n"}],"clouds":{"all":99},"wind":{"speed":3.19,"deg":78},"visibility":10000,"pop":0,"sys":{"pod":"n"},"dt_txt":"2020-11-29 03:00:00"},{"dt":1606629600,"main":{"temp":1.85,"feels_like":-2.42,"temp_min":1.85,"temp_max":1.85,"pressure":1027,"sea_level":1027,"grnd_level":1004,"humidity":90,"temp_kf":0},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04n"}],"clouds":{"all":99},"wind":{"speed":3.35,"deg":78},"visibility":10000,"pop":0,"sys":{"pod":"n"},"dt_txt":"2020-11-29 06:00:00"},{"dt":1606640400,"main":{"temp":2.44,"feels_like":-2.1,"temp_min":2.44,"temp_max":2.44,"pressure":1027,"sea_level":1027,"grnd_level":1004,"humidity":87,"temp_kf":0},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04d"}],"clouds":{"all":100},"wind":{"speed":3.76,"deg":87},"visibility":10000,"pop":0,"sys":{"pod":"d"},"dt_txt":"2020-11-29 09:00:00"},{"dt":1606651200,"main":{"temp":3.76,"feels_like":0.15,"temp_min":3.76,"temp_max":3.76,"pressure":1027,"sea_level":1027,"grnd_level":1004,"humidity":84,"temp_kf":0},"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04d"}],"clouds":{"all":78},"wind":{"speed":2.6,"deg":96},"visibility":10000,"pop":0,"sys":{"pod":"d"},"dt_txt":"2020-11-29 12:00:00"}],"city":{"id":2700597,"name":"Kl\u00e5ver\u00f6d","coord":{"lat":56.04,"lon":13.18},"country":"SE","population":0,"timezone":3600,"sunrise":1606201357,"sunset":1606229153}},{"place_id":214420119,"licence":"Data \u00a9 OpenStreetMap contributors, ODbL 1.0. https:\/\/osm.org\/copyright","osm_type":"way","osm_id":633996513,"lat":"56.04074390218278","lon":"13.17982941553395","place_rank":26,"category":"highway","type":"tertiary","importance":0.09999999999999998,"addresstype":"road","name":"M 1823","display_name":"M 1823, Grindhus, Sval\u00f6vs kommun, Sk\u00e5ne l\u00e4n, G\u00f6taland, 268 76, Sverige","address":{"road":"M 1823","isolated_dwelling":"Grindhus","town":"Sval\u00f6vs kommun","county":"Sk\u00e5ne l\u00e4n","region":"G\u00f6taland","postcode":"268 76","country":"Sverige","country_code":"se"},"boundingbox":["56.0392779","56.041408","13.1713185","13.18638"]}]
EOD;
        $weatherFormatter = new WeatherFormatter();

        $res = $weatherFormatter->formatForecast(json_decode($data, true));

        $this->assertEquals("Sverige", $res["location"]["address"]["country"]);
    }
}
